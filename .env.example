# Example environment configuration for faster-whisper-rocm
#
# Copy this file to ".env" in the project root to configure default values
# for the `faster-whisper-rocm transcribe` command. Values here become the
# CLI defaults, but can always be overridden via explicit CLI flags.
#
# Notes
# - All variables are optional; sensible defaults are used if unset.
# - Booleans accept: true/false, 1/0, yes/no, on/off (case-insensitive).
# - Lists use comma-separated values. Paths can be absolute or relative.
# - See faster_whisper_rocm/utils/constant.py for the authoritative defaults
#   and parsers. Only that module reads environment variables at startup.
#
# Prefix
# All variables start with: FWR_TRANSCRIBE_

# ------------------
# Model init options
# ------------------
FWR_TRANSCRIBE_MODEL=Systran/faster-whisper-medium
FWR_TRANSCRIBE_DEVICE=cuda
FWR_TRANSCRIBE_COMPUTE_TYPE=float16
# Comma-separated device indices (e.g., "0" or "0,1"). Leave empty for auto/None.
FWR_TRANSCRIBE_DEVICE_INDEX=
# Number of CPU threads for preprocessing/feature extraction (0=auto)
FWR_TRANSCRIBE_CPU_THREADS=0
# Data loader workers
FWR_TRANSCRIBE_NUM_WORKERS=1
# Custom directory for model downloads (leave empty to use faster-whisper defaults)
FWR_TRANSCRIBE_DOWNLOAD_ROOT=
# If true, only use local files and never download
FWR_TRANSCRIBE_LOCAL_FILES_ONLY=false

# ----------------
# Transcribe args
# ----------------
# Target language (e.g., en). Empty means auto-detect when available
FWR_TRANSCRIBE_LANGUAGE=
# Task: transcribe | translate
FWR_TRANSCRIBE_TASK=transcribe
FWR_TRANSCRIBE_BEAM_SIZE=1
# Optional integers/floats: leave empty to use library defaults
FWR_TRANSCRIBE_BEST_OF=
FWR_TRANSCRIBE_PATIENCE=
FWR_TRANSCRIBE_LENGTH_PENALTY=
FWR_TRANSCRIBE_TEMPERATURE=0.0
FWR_TRANSCRIBE_TEMPERATURE_INCREMENT_ON_FALLBACK=0.2
FWR_TRANSCRIBE_COMPRESSION_RATIO_THRESHOLD=
FWR_TRANSCRIBE_LOG_PROB_THRESHOLD=
FWR_TRANSCRIBE_NO_SPEECH_THRESHOLD=
FWR_TRANSCRIBE_CONDITION_ON_PREVIOUS_TEXT=true
# Optional prompts
FWR_TRANSCRIBE_INITIAL_PROMPT=
FWR_TRANSCRIBE_PREFIX=
FWR_TRANSCRIBE_SUPPRESS_BLANK=true
# String per faster-whisper spec, e.g., "-1" or comma-separated ids
FWR_TRANSCRIBE_SUPPRESS_TOKENS=
FWR_TRANSCRIBE_WITHOUT_TIMESTAMPS=false
FWR_TRANSCRIBE_MAX_INITIAL_TIMESTAMP=1.0
FWR_TRANSCRIBE_WORD_TIMESTAMPS=false
# Punctuation defaults per upstream
FWR_TRANSCRIBE_PREPEND_PUNCTUATIONS=“¿([{-
FWR_TRANSCRIBE_APPEND_PUNCTUATIONS=”.:;?!)}]
# Voice activity detection
FWR_TRANSCRIBE_VAD_FILTER=true
# JSON string per library, e.g.: {"min_silence_duration_ms": 500}
FWR_TRANSCRIBE_VAD_PARAMETERS=

# -------------
# Output config
# -------------
# plain | jsonl | srt | vtt
FWR_TRANSCRIBE_OUTPUT_FORMAT=plain
# Directory or file path. When directory, a filename is derived from audio basename.
FWR_TRANSCRIBE_OUTPUT=data/transcripts
# -1 = unlimited segments
FWR_TRANSCRIBE_MAX_SEGMENTS=-1
FWR_TRANSCRIBE_PRINT_LANGUAGE=true
FWR_TRANSCRIBE_PRINT_PROB=true
# show-progress/no-progress can still be toggled at CLI
FWR_TRANSCRIBE_SHOW_PROGRESS=true
# Extra pass-through options to transcribe() as key=value pairs, comma-separated
# Example: "beam_size=2,task=translate" (CLI --opt remains repeatable)
FWR_TRANSCRIBE_OPT=

# -----------------------
# Subtitle formatting (SRT/VTT)
# -----------------------
# These control the custom subtitle formatter used for SRT/VTT output.
# They are env-only (no CLI flags). See faster_whisper_rocm/utils/constant.py for details.

# Limits and timing
FWR_TRANSCRIBE_MAX_CPS=17.0
FWR_TRANSCRIBE_MIN_CPS=12.0
FWR_TRANSCRIBE_MAX_LINE_CHARS=42
FWR_TRANSCRIBE_MAX_LINES_PER_BLOCK=2
FWR_TRANSCRIBE_MAX_SEGMENT_DURATION_SEC=5.5
FWR_TRANSCRIBE_MIN_SEGMENT_DURATION_SEC=1.2
FWR_TRANSCRIBE_DISPLAY_BUFFER_SEC=0.2

# Gap calculation (min gap = GAP_FRAMES / FPS)
FWR_TRANSCRIBE_FPS=25.0
FWR_TRANSCRIBE_GAP_FRAMES=2

# Boundary / heuristics for wrapping and merging
FWR_TRANSCRIBE_BOUNDARY_CHARS=.?!…
FWR_TRANSCRIBE_CLAUSE_CHARS=,;:
# Comma-separated lists
# Words that are soft boundaries when splitting long lines
FWR_TRANSCRIBE_SOFT_BOUNDARY_WORDS=and,but,that,which,who,where,when,while,so
# Interjections that may merge differently
FWR_TRANSCRIBE_INTERJECTION_WHITELIST=whoa,wow,what,oh,hey,ah

# Block size caps
# If empty, MAX_BLOCK_CHARS defaults to MAX_LINE_CHARS*MAX_LINES_PER_BLOCK
FWR_TRANSCRIBE_MAX_BLOCK_CHARS=
FWR_TRANSCRIBE_MAX_BLOCK_CHARS_SOFT=90
